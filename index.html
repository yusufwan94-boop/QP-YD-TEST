<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QP-YD | MRSM Gerik Duality Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: #f8fafc; scroll-behavior: smooth; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); }
        .flip-card { height: 180px; perspective: 1000px; cursor: pointer; }
        .flip-card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .flip-card.is-flipped .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; border-radius: 1rem; }
        .flip-card-front { background: #1e293b; border: 1px solid #334155; }
        .flip-card-back { background: #3b82f6; color: white; transform: rotateY(180deg); text-align: center; font-size: 0.85rem; }
        .metal-surface { position: relative; height: 280px; background: #1e293b; border-radius: 1.5rem; border: 2px solid #334155; overflow: hidden; }
        .barrier-line { position: absolute; left: 50%; top: 0; bottom: 0; width: 2px; background: rgba(239, 68, 68, 0.4); border-left: 2px dashed #ef4444; z-index: 10; }
        .electron { width: 14px; height: 14px; background: #60a5fa; border-radius: 50%; position: absolute; box-shadow: 0 0 12px #3b82f6; z-index: 20; transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1), opacity 0.3s; }
        .photon { width: 10px; height: 10px; border-radius: 50%; position: absolute; left: -20px; z-index: 50; }
        .wave-container { position: relative; height: 300px; background: #000; border-radius: 1rem; overflow: hidden; border: 2px solid #334155; }
        .fringe { height: 100%; position: absolute; top: 0; width: 4px; transition: opacity 0.5s; }
        .electron-dot { width: 4px; height: 4px; background: #60a5fa; border-radius: 50%; position: absolute; box-shadow: 0 0 4px #3b82f6; }
        .tab-active { border-bottom: 4px solid #3b82f6; color: white; opacity: 1; }
        .tab-inactive { opacity: 0.5; }
    </style>
</head>
<body class="pb-20">

    <nav class="sticky top-0 z-50 glass border-b border-slate-700 py-4 px-6">
        <div class="max-w-7xl mx-auto flex justify-between items-center text-center">
            <h1 class="text-3xl font-black tracking-tighter text-blue-400">QP-YD</h1>
            <div class="flex items-center gap-4 md:gap-8">
                <button onclick="switchTab('photo')" id="btn-photo" data-key="nav-photo" class="text-[10px] md:text-xs font-bold uppercase tracking-widest py-2 tab-active">Photoelectric</button>
                <button onclick="switchTab('duality')" id="btn-duality" data-key="nav-duality" class="text-[10px] md:text-xs font-bold uppercase tracking-widest py-2 tab-inactive">Duality</button>
                <button onclick="toggleLang()" class="ml-4 px-3 py-1 rounded bg-slate-800 border border-slate-600 text-[10px] font-black hover:bg-slate-700 transition-colors">BM / EN</button>
            </div>
            <span class="hidden md:inline bg-blue-600/20 text-blue-400 px-3 py-1 rounded-full text-[10px] font-bold border border-blue-500/30 uppercase">MRSM Gerik Official</span>
        </div>
    </nav>

    <main id="view-photo" class="max-w-7xl mx-auto px-6 py-12 space-y-12">
        <header class="text-center">
            <h2 class="text-5xl font-black mb-4 tracking-tight"><span data-key="title-p1">Particle</span> <span class="text-blue-500" data-key="title-p2">Nature.</span></h2>
            <p class="text-slate-400 max-w-2xl mx-auto italic" data-key="subtitle-photo">Proving that E = hf (Energy depends on Frequency, not Intensity).</p>
        </header>

        <section class="grid lg:grid-cols-2 gap-8 items-start">
            <div class="glass p-8 rounded-3xl space-y-6 shadow-2xl">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold uppercase tracking-tight text-slate-300" data-key="phys-pool">Physical Pool</h3>
                    <div id="statusIndicator" class="text-[10px] bg-slate-500/20 text-slate-400 px-2 py-1 rounded border border-slate-500/20 font-mono tracking-widest uppercase">Standby</div>
                </div>
                <div class="metal-surface" id="photo-arena"><div class="barrier-line"></div></div>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setPhotoColor(4.6, '#ef4444')" class="py-2 rounded-lg bg-red-600/20 border border-red-600/50 hover:bg-red-600 text-[10px] font-bold" data-key="btn-red">RED (4.6)</button>
                    <button onclick="setPhotoColor(5.5, '#22c55e')" class="py-2 rounded-lg bg-green-600/20 border border-green-600/50 hover:bg-green-600 text-[10px] font-bold" data-key="btn-green">GREEN (5.5)</button>
                    <button onclick="setPhotoColor(6.7, '#3b82f6')" class="py-2 rounded-lg bg-blue-600/20 border border-blue-600/50 hover:bg-blue-600 text-[10px] font-bold" data-key="btn-blue">BLUE (6.7)</button>
                    <button onclick="setPhotoColor(12.0, '#a855f7')" class="py-2 rounded-lg bg-purple-600/20 border border-purple-600/50 hover:bg-purple-600 text-[10px] font-bold" data-key="btn-uv">UV (12.0)</button>
                </div>
                <div class="grid grid-cols-3 gap-2">
                    <div class="bg-slate-800/50 p-4 rounded-xl border border-slate-700">
                        <label class="block text-[10px] font-black text-blue-400 uppercase mb-2">Freq (10^14 Hz)</label>
                        <input type="range" id="fIn" min="0" max="20" step="0.1" value="5.5" class="w-full" oninput="updatePhoto()">
                        <div id="fOut" class="text-xl font-black mt-1">5.5</div>
                    </div>
                    <div class="bg-slate-800/50 p-4 rounded-xl border border-slate-700">
                        <label class="block text-[10px] font-black text-amber-400 uppercase mb-2" data-key="lbl-intensity">Int (W/m^2)</label>
                        <input type="range" id="iIn" min="1" max="15" value="5" class="w-full" oninput="updatePhoto()">
                        <div id="iOut" class="text-xl font-black mt-1">5</div>
                    </div>
                    <div class="bg-slate-800/50 p-4 rounded-xl border border-slate-700">
                        <label class="block text-[10px] font-black text-red-400 uppercase mb-2" data-key="lbl-work">Work function (eV)</label>
                        <input type="range" id="tIn" min="1.5" max="5.5" step="0.1" value="2.3" class="w-full" oninput="updatePhoto()">
                        <div id="tOut" class="text-xl font-black mt-1">2.3</div>
                    </div>
                </div>
                <button onclick="firePhotons()" id="btn-execute" class="w-full bg-blue-600 hover:bg-blue-500 py-5 rounded-2xl font-black text-lg shadow-xl uppercase tracking-widest transition-all" data-key="btn-execute">Execute Emission</button>
            </div>
            <div class="glass p-8 rounded-3xl shadow-2xl flex flex-col h-full min-h-[500px]">
                <h3 class="text-xl font-bold uppercase tracking-tight text-slate-300 mb-6 italic" data-key="graph-title">Energy Analysis Graph</h3>
                <div class="flex-grow"><canvas id="quantumGraph"></canvas></div>
            </div>
        </section>

        <section class="py-12">
            <h3 class="text-2xl font-black mb-8 text-center uppercase tracking-widest text-slate-500" data-key="log-p-title">Observation Logs (Particle)</h3>
            <div class="grid md:grid-cols-3 gap-6">
                <div class="flip-card" onclick="this.classList.toggle('is-flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front text-center">
                            <span class="text-amber-500 text-xs font-bold mb-2">LOG 01: INTENSITY</span>
                            <p class="text-sm font-bold" data-key="log1-q">Does more light intensity guarantee emission?</p>
                        </div>
                        <div class="flip-card-back">
                            <p class="font-black mb-2" data-key="no">NO.</p>
                            <p data-key="log1-a">If f < fo, increasing intensity just hits the metal with more "weak" photons. Energy is not accumulated over time.</p>
                        </div>
                    </div>
                </div>
                <div class="flip-card" onclick="this.classList.toggle('is-flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front text-center">
                            <span class="text-blue-500 text-xs font-bold mb-2">LOG 02: KINETIC ENERGY</span>
                            <p class="text-sm font-bold" data-key="log2-q">What determines the speed of ejected electrons?</p>
                        </div>
                        <div class="flip-card-back">
                            <p class="font-black mb-2" data-key="freq">FREQUENCY.</p>
                            <p data-key="log2-a">Excess energy (hf - W) becomes Kinetic Energy. Higher frequency means faster photoelectrons.</p>
                        </div>
                    </div>
                </div>
                <div class="flip-card" onclick="this.classList.toggle('is-flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front text-center">
                            <span class="text-red-500 text-xs font-bold mb-2">LOG 03: INSTANT EMISSION</span>
                            <p class="text-sm font-bold" data-key="log3-q">Is there a time lag for emission?</p>
                        </div>
                        <div class="flip-card-back">
                            <p class="font-black mb-2" data-key="immediate">IMMEDIATE.</p>
                            <p data-key="log3-a">Emission is instantaneous (< 10^-9 s), proving 1-to-1 particle collision between photon and electron.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <main id="view-duality" class="hidden max-w-7xl mx-auto px-6 py-12 space-y-16">
        <header class="text-center">
            <h2 class="text-5xl font-black mb-4 tracking-tight"><span data-key="title-w1">Wave</span> <span class="text-cyan-400" data-key="title-w2">Duality.</span></h2>
            <p class="text-slate-400 max-w-2xl mx-auto italic" data-key="subtitle-duality">Comparing Light Interference and Electron Diffraction.</p>
        </header>

        <div class="grid lg:grid-cols-2 gap-12">
            <div class="glass p-8 rounded-3xl space-y-6">
                <h3 class="text-xl font-bold text-cyan-400 uppercase tracking-widest" data-key="light-title">1. Light (Young's Slit)</h3>
                <div class="wave-container flex items-center justify-around" id="slit-screen"></div>
                <div class="grid grid-cols-3 gap-4 bg-slate-800/50 p-4 rounded-xl">
                    <div>
                        <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2" data-key="lbl-wave">Wavelength (lambda)</label>
                        <input type="range" id="waveLen" min="400" max="700" value="650" class="w-full" oninput="updateSlit()">
                        <div id="waveLenOut" class="text-sm font-bold text-cyan-400 mt-1">650 nm</div>
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2" data-key="lbl-dist">Distance (D)</label>
                        <input type="range" id="distD" min="1" max="100" value="50" class="w-full" oninput="updateSlit()">
                        <div id="distDOut" class="text-sm font-bold text-cyan-400 mt-1">50 cm</div>
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2" data-key="lbl-slit">Slit Width (a)</label>
                        <input type="range" id="slitSep" min="0.1" max="2.0" step="0.1" value="0.5" class="w-full" oninput="updateSlit()">
                        <div id="slitSepOut" class="text-sm font-bold text-cyan-400 mt-1">0.5 mm</div>
                    </div>
                </div>
            </div>

            <div class="glass p-8 rounded-3xl space-y-6">
                <h3 class="text-xl font-bold text-blue-400 uppercase tracking-widest" data-key="matter-title">2. Matter (Electron Wave)</h3>
                <div class="wave-container" id="electron-screen" style="position:relative; background:#000;"></div>
                <div class="bg-slate-800/50 p-4 rounded-xl flex gap-4 items-end">
                    <div class="flex-grow">
                        <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2" data-key="lbl-volt">Voltage (V)</label>
                        <input type="range" id="eVolt" min="50" max="500" value="200" class="w-full" oninput="updateElectron()">
                        <div class="text-lg font-black mt-1" id="eVoltOut">200V</div>
                    </div>
                    <button onclick="fireElectronGun()" class="bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded font-bold text-xs uppercase" data-key="btn-fire">Fire Gun</button>
                    <button onclick="clearElectronScreen()" class="border border-slate-600 px-4 py-2 rounded font-bold text-[10px] uppercase" data-key="btn-clear">Clear</button>
                </div>
            </div>
        </div>

        <section class="grid md:grid-cols-2 gap-8 py-12">
            <div class="space-y-6">
                <h4 class="text-center font-bold text-slate-500 uppercase tracking-widest" data-key="log-l-title">Light Observation Logs</h4>
                <div class="grid gap-4">
                    <div class="flip-card" onclick="this.classList.toggle('is-flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front text-center">
                                <span class="text-cyan-500 text-xs font-bold mb-2">LOG L1: COLOR CHANGE</span>
                                <p class="text-sm font-bold" data-key="logL1-q">How does wavelength affect fringe separation (x)?</p>
                            </div>
                            <div class="flip-card-back">
                                <p class="font-black mb-2" data-key="direct">DIRECT RELATION.</p>
                                <p data-key="logL1-a">Longer wavelengths (Red) diffract more than shorter wavelengths (Blue), creating wider gaps between fringes.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="this.classList.toggle('is-flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front text-center">
                                <span class="text-cyan-500 text-xs font-bold mb-2">LOG L2: SLIT SEPARATION</span>
                                <p class="text-sm font-bold" data-key="logL2-q">Effect of bringing slits closer together (d)?</p>
                            </div>
                            <div class="flip-card-back">
                                <p class="font-black mb-2" data-key="inverse">INVERSE RELATION.</p>
                                <p data-key="logL2-a">As d decreases, the fringe width x increases according to x = (wavelength x D) / a.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="this.classList.toggle('is-flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front text-center">
                                <span class="text-cyan-500 text-xs font-bold mb-2">LOG L3: WAVE PROOF</span>
                                <p class="text-sm font-bold" data-key="logL3-q">Why does this prove light is a wave?</p>
                            </div>
                            <div class="flip-card-back">
                                <p class="font-black mb-2" data-key="interference">INTERFERENCE.</p>
                                <p data-key="logL3-a">Particles would just create two lines. Alternating bright and dark regions only occur due to wave superposition.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="space-y-6">
                <h4 class="text-center font-bold text-slate-500 uppercase tracking-widest" data-key="log-e-title">Electron Observation Logs</h4>
                <div class="grid gap-4">
                    <div class="flip-card" onclick="this.classList.toggle('is-flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front text-center">
                                <span class="text-blue-500 text-xs font-bold mb-2">LOG E1: VOLTAGE IMPACT</span>
                                <p class="text-sm font-bold" data-key="logE1-q">What happens when you increase Gun Voltage?</p>
                            </div>
                            <div class="flip-card-back">
                                <p class="font-black mb-2" data-key="shorten">WAVELENGTH SHORTENS.</p>
                                <p data-key="logE1-a">Higher Voltage causing Higher Momentum causing Smaller de Broglie wavelength (wavelength = h/p).</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="this.classList.toggle('is-flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front text-center">
                                <span class="text-blue-500 text-xs font-bold mb-2">LOG E2: PATTERN DENSITY</span>
                                <p class="text-sm font-bold" data-key="logE2-q">Why do electrons form "rings" or fringes?</p>
                            </div>
                            <div class="flip-card-back">
                                <p class="font-black mb-2" data-key="diffraction">DIFFRACTION.</p>
                                <p data-key="logE2-a">Electrons behave as waves when passing through atoms, creating constructive and destructive interference patterns.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="this.classList.toggle('is-flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front text-center">
                                <span class="text-blue-500 text-xs font-bold mb-2">LOG E3: APPLICATIONS</span>
                                <p class="text-sm font-bold" data-key="logE3-q">Why use electron waves instead of light?</p>
                            </div>
                            <div class="flip-card-back">
                                <p class="font-black mb-2" data-key="res">HIGH RESOLUTION.</p>
                                <p data-key="logE3-a">Tiny electron wavelengths allow us to "see" things much smaller than visible light can resolve (Electron Microscopes).</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        const H_EV_SCALE = 0.4136; 

        // TRANSLATION DATA
        let currentLang = 'en';
        const translations = {
            en: {
                "nav-photo": "Photoelectric", "nav-duality": "Duality",
                "title-p1": "Particle", "title-p2": "Nature.",
                "subtitle-photo": "Proving that E = hf (Energy depends on Frequency, not Intensity).",
                "phys-pool": "Physical Pool", "btn-red": "RED (4.6)", "btn-green": "GREEN (5.5)", "btn-blue": "BLUE (6.7)", "btn-uv": "UV (12.0)",
                "lbl-intensity": "Int (W/m^2)", "lbl-work": "Work function (eV)", "btn-execute": "Execute Emission",
                "graph-title": "Energy Analysis Graph", "log-p-title": "Observation Logs (Particle)",
                "log1-q": "Does more light intensity guarantee emission?", "no": "NO.", "log1-a": "If f < fo, increasing intensity just hits the metal with more 'weak' photons. Energy is not accumulated over time.",
                "log2-q": "What determines the speed of ejected electrons?", "freq": "FREQUENCY.", "log2-a": "Excess energy (hf - W) becomes Kinetic Energy. Higher frequency means faster photoelectrons.",
                "log3-q": "Is there a time lag for emission?", "immediate": "IMMEDIATE.", "log3-a": "Emission is instantaneous (< 10^-9 s), proving 1-to-1 particle collision between photon and electron.",
                "title-w1": "Wave", "title-w2": "Duality.", "subtitle-duality": "Comparing Light Interference and Electron Diffraction.",
                "light-title": "1. Light (Young's Slit)", "lbl-wave": "Wavelength (lambda)", "lbl-dist": "Distance (D)", "lbl-slit": "Slit Width (a)",
                "matter-title": "2. Matter (Electron Wave)", "lbl-volt": "Voltage (V)", "btn-fire": "Fire Gun", "btn-clear": "Clear",
                "log-l-title": "Light Observation Logs", "logL1-q": "How does wavelength affect fringe separation (x)?", "direct": "DIRECT RELATION.", "logL1-a": "Longer wavelengths (Red) diffract more than shorter wavelengths (Blue), creating wider gaps between fringes.",
                "logL2-q": "Effect of bringing slits closer together (d)?", "inverse": "INVERSE RELATION.", "logL2-a": "As d decreases, the fringe width x increases according to x = (wavelength x D) / a.",
                "logL3-q": "Why does this prove light is a wave?", "interference": "INTERFERENCE.", "logL3-a": "Particles would just create two lines. Alternating bright and dark regions only occur due to wave superposition.",
                "log-e-title": "Electron Observation Logs", "logE1-q": "What happens when you increase Gun Voltage?", "shorten": "WAVELENGTH SHORTENS.", "logE1-a": "Higher Voltage causing Higher Momentum causing Smaller de Broglie wavelength (wavelength = h/p).",
                "logE2-q": "Why do electrons form 'rings' or fringes?", "diffraction": "DIFFRACTION.", "logE2-a": "Electrons behave as waves when passing through atoms, creating constructive and destructive interference patterns.",
                "logE3-q": "Why use electron waves instead of light?", "res": "HIGH RESOLUTION.", "logE3-a": "Tiny electron wavelengths allow us to 'see' things much smaller than visible light can resolve (Electron Microscopes)."
            },
            bm: {
                "nav-photo": "Fotoelektrik", "nav-duality": "Dualiti",
                "title-p1": "Sifat", "title-p2": "Zarah.",
                "subtitle-photo": "Membuktikan E = hf (Tenaga bergantung pada Frekuensi, bukan Keamatan).",
                "phys-pool": "Kolam Fizikal", "btn-red": "MERAH (4.6)", "btn-green": "HIJAU (5.5)", "btn-blue": "BIRU (6.7)", "btn-uv": "UV (12.0)",
                "lbl-intensity": "Keamatan (W/m^2)", "lbl-work": "Fungsi Kerja (eV)", "btn-execute": "Laksanakan Pancaran",
                "graph-title": "Graf Analisis Tenaga", "log-p-title": "Log Pemerhatian (Zarah)",
                "log1-q": "Adakah keamatan cahaya tinggi menjamin pancaran?", "no": "TIDAK.", "log1-a": "Jika f < fo, peningkatan keamatan hanya menghentam logam dengan lebih banyak foton 'lemah'. Tenaga tidak terkumpul mengikut masa.",
                "log2-q": "Apakah yang menentukan kelajuan elektron yang terpancar?", "freq": "FREKUENSI.", "log2-a": "Tenaga berlebihan (hf - W) menjadi Tenaga Kinetik. Frekuensi lebih tinggi bermakna fotoelektron lebih laju.",
                "log3-q": "Adakah terdapat sela masa untuk pancaran?", "immediate": "SERTA-MERTA.", "log3-a": "Pancaran adalah serta-merta (< 10^-9 s), membuktikan perlanggaran zarah 1-ke-1 antara foton dan elektron.",
                "title-w1": "Dualiti", "title-w2": "Gelombang.", "subtitle-duality": "Membandingkan Interferens Cahaya dan Belauan Elektron.",
                "light-title": "1. Cahaya (Celah Young)", "lbl-wave": "Panjang Gelombang (lambda)", "lbl-dist": "Jarak (D)", "lbl-slit": "Lebar Celah (a)",
                "matter-title": "2. Jirim (Gelombang Elektron)", "lbl-volt": "Voltan (V)", "btn-fire": "Tembak", "btn-clear": "Padam",
                "log-l-title": "Log Pemerhatian Cahaya", "logL1-q": "Bagaimanakah panjang gelombang mempengaruhi lebar pinggir (x)?", "direct": "HUBUNGAN LANGSUNG.", "logL1-a": "Panjang gelombang lebih panjang (Merah) membelah lebih daripada biru, menghasilkan jurang lebih lebar antara pinggir.",
                "logL2-q": "Kesan merapatkan celah (d)?", "inverse": "HUBUNGAN SONGSANG.", "logL2-a": "Apabila d berkurang, lebar pinggir x bertambah mengikut x = (lambda x D) / a.",
                "logL3-q": "Mengapa ini membuktikan cahaya ialah gelombang?", "interference": "INTERFERENS.", "logL3-a": "Zarah hanya akan menghasilkan dua baris. Kawasan terang dan gelap berselang-seli hanya berlaku kerana superposisi gelombang.",
                "log-e-title": "Log Pemerhatian Elektron", "logE1-q": "Apakah yang berlaku apabila anda meningkatkan Voltan?", "shorten": "PANJANG GELOMBANG MEMENDEK.", "logE1-a": "Voltan lebih tinggi menyebabkan Momentum lebih tinggi, menghasilkan panjang gelombang de Broglie lebih kecil (lambda = h/p).",
                "logE2-q": "Mengapa elektron membentuk corak 'gelang'?", "diffraction": "BELAUAN.", "logE2-a": "Elektron berkelakuan sebagai gelombang semasa melalui atom, menghasilkan corak interferens membina dan memusnah.",
                "logE3-q": "Mengapa menggunakan gelombang elektron berbanding cahaya?", "res": "RESOLUSI TINGGI.", "logE3-a": "Panjang gelombang elektron yang halus membolehkan kita 'melihat' benda yang jauh lebih kecil daripada cahaya nampak (Mikroskop Elektron)."
            }
        };

        function toggleLang() {
            currentLang = currentLang === 'en' ? 'bm' : 'en';
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if (translations[currentLang][key]) {
                    el.innerText = translations[currentLang][key];
                }
            });
            updatePhoto(); // Update status indicator text
        }

        // TAB LOGIC
        function switchTab(mode) {
            document.getElementById('view-photo').classList.toggle('hidden', mode !== 'photo');
            document.getElementById('view-duality').classList.toggle('hidden', mode !== 'duality');
            document.getElementById('btn-photo').className = mode === 'photo' ? 'text-[10px] md:text-xs font-bold uppercase tracking-widest py-2 tab-active' : 'text-[10px] md:text-xs font-bold uppercase tracking-widest py-2 tab-inactive';
            document.getElementById('btn-duality').className = mode === 'duality' ? 'text-[10px] md:text-xs font-bold uppercase tracking-widest py-2 tab-active' : 'text-[10px] md:text-xs font-bold uppercase tracking-widest py-2 tab-inactive';
            if(mode === 'duality') { updateSlit(); updateElectron(); }
        }

        // PHOTOELECTRIC LOGIC
        const photoArena = document.getElementById('photo-arena');
        const fIn = document.getElementById('fIn'), iIn = document.getElementById('iIn'), tIn = document.getElementById('tIn');
        let photonColor = '#fbbf24';

        function initElectrons() { for(let i=0; i<18; i++) { let e = document.createElement('div'); e.className='electron'; e.style.left=(55+Math.random()*40)+'%'; e.style.top=(15+Math.random()*70)+'%'; photoArena.appendChild(e); } }
        initElectrons();

        function setPhotoColor(f, c) { fIn.value=f; photonColor=c; updatePhoto(); }

        const ctx = document.getElementById('quantumGraph').getContext('2d');
        let chart = new Chart(ctx, { 
            type:'line', 
            data:{
                datasets:[{
                    label: 'Theoretical Line',
                    data:[],borderColor:'#3b82f6',borderWidth:3,pointRadius:0,fill:true,backgroundColor:'rgba(59,130,246,0.05)'
                },{
                    label: 'Current Observation',
                    data:[],backgroundColor:'#fbbf24',pointRadius:8,showLine:false
                }]
            }, 
            options:{
                responsive:true,
                maintainAspectRatio:false,
                scales:{
                    y:{
                        min:-6, max:6,
                        title: { display: true, text: 'Max Kinetic Energy (eV)', color: '#94a3b8', font: { weight: 'bold' } },
                        grid: { color: 'rgba(255,255,255,0.05)' }
                    },
                    x:{
                        type:'linear', min:0, max:20,
                        title: { display: true, text: 'Frequency (10ยนโด Hz)', color: '#94a3b8', font: { weight: 'bold' } },
                        grid: { color: 'rgba(255,255,255,0.05)' }
                    }
                },
                plugins:{legend:{display:false}}
            }
        });

        function updatePhoto() {
            const f=parseFloat(fIn.value), t=parseFloat(tIn.value), i=parseInt(iIn.value);
            document.getElementById('fOut').innerText=f; 
            document.getElementById('tOut').innerText=t; 
            document.getElementById('iOut').innerText=i;
            const kmax = (H_EV_SCALE * f) - t;
            chart.data.datasets[0].data=[{x:0,y:-t},{x:20,y:(H_EV_SCALE*20)-t}]; 
            chart.data.datasets[1].data=[{x:f,y:kmax}]; 
            chart.data.datasets[1].backgroundColor=photonColor; 
            chart.update('none');
            const status = document.getElementById('statusIndicator');
            const isEmitting = (H_EV_SCALE * f) > t;
            
            // Dynamic translation for status indicator
            if (currentLang === 'en') {
                status.innerText = !isEmitting ? "No Emission" : "Emission Active";
            } else {
                status.innerText = !isEmitting ? "Tiada Pancaran" : "Pancaran Aktif";
            }
            
            status.className = !isEmitting ? 
                "text-[10px] bg-red-500/20 text-red-400 px-2 py-1 rounded border border-red-500/20 font-mono tracking-widest uppercase" : 
                "text-[10px] bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded border border-emerald-500/20 font-mono tracking-widest uppercase";
        }
        updatePhoto();

        function firePhotons() {
            const f=parseFloat(fIn.value), t=parseFloat(tIn.value), intensity=parseInt(iIn.value);
            const isEmitting = (H_EV_SCALE * f) > t;
            for(let i=0; i<intensity; i++) {
                setTimeout(() => {
                    const p=document.createElement('div'); p.className='photon'; p.style.background=photonColor; p.style.top=(10+Math.random()*80)+'%'; photoArena.appendChild(p);
                    const anim=p.animate([{left:'-20px'},{left:'110%'}], {duration:1200-(f*40)});
                    anim.onfinish=()=>p.remove();
                    setTimeout(()=> { 
                        if(isEmitting){ 
                            const es=document.querySelectorAll('.electron'); 
                            const target=es[Math.floor(Math.random()*es.length)]; 
                            if(target && target.style.opacity!=='0'){
                                const speed = 0.4 + ((H_EV_SCALE * f) - t) * 0.2;
                                target.style.transition = `transform ${0.8/speed}s linear, opacity 0.3s`;
                                target.style.transform='translateX(600px)';
                                target.style.opacity='0';
                                setTimeout(()=>{
                                    target.style.transition = 'none';
                                    target.style.transform='none';
                                    target.style.opacity='1';
                                },2000);
                            }
                        } 
                    }, (1200-(f*40))*0.5);
                }, i*80);
            }
        }

        // DUALITY LOGIC
        function updateSlit() {
            const lambda = parseFloat(document.getElementById('waveLen').value);
            const d = parseFloat(document.getElementById('slitSep').value);
            const D = parseFloat(document.getElementById('distD').value);
            document.getElementById('waveLenOut').innerText = lambda + " nm";
            document.getElementById('distDOut').innerText = D + " cm";
            document.getElementById('slitSepOut').innerText = d + " mm";
            const screen = document.getElementById('slit-screen');
            if(!screen) return;
            screen.innerHTML = '';
            const color = `hsl(${(1 - (lambda - 400) / 300) * 240}, 100%, 50%)`;
            const spacing = (lambda / 450) * (D / 15) * (1 / d) * 1.2;
            for(let i=-25; i<25; i++) {
                const fr = document.createElement('div');
                fr.className = 'fringe';
                fr.style.left = (50 + i * spacing) + '%';
                fr.style.background = color;
                fr.style.opacity = Math.max(0, Math.cos(i * 0.6) * (1 - Math.abs(i)/30));
                fr.style.boxShadow = `0 0 8px ${color}`;
                screen.appendChild(fr);
            }
        }

        const eScreen = document.getElementById('electron-screen');
        function updateElectron() {
            const v = document.getElementById('eVolt').value;
            document.getElementById('eVoltOut').innerText = v + "V";
        }
        function fireElectronGun() {
            const v = parseInt(document.getElementById('eVolt').value);
            const spacing = (1 / Math.sqrt(v)) * 120; 
            for(let i=0; i<50; i++) {
                setTimeout(() => {
                    const dot = document.createElement('div');
                    dot.className = 'electron-dot';
                    const rand = (Math.random() - 0.5) * 40;
                    const offset = Math.round(rand) * spacing;
                    const intensity = Math.pow(Math.cos(offset * 0.05), 2);
                    if (Math.random() < intensity) {
                        dot.style.left = (50 + offset/2) + '%';
                        dot.style.top = (Math.random() * 95) + '%';
                        dot.style.opacity = '0';
                        eScreen.appendChild(dot);
                        dot.animate([{opacity:0}, {opacity:0.8}], {duration: 500, fill: 'forwards'});
                    }
                }, i * 20);
            }
        }
        function clearElectronScreen() { if(eScreen) eScreen.innerHTML = ''; }
    </script>
</body>
</html>
